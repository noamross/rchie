<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Parser for 'ArchieML' • rchie</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="A Parser for 'ArchieML'">
<meta property="og:description" content="Parses the 'ArchieML' format from the New York Times &lt;http://archieml.org&gt;.
  Also provides utilities for retrieving Google Drive documents for parsing.">
<meta property="og:image" content="https://noamross.github.io/rchie/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rchie</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Release Notes</a>
</li>
<li>
  <a href="CONTRIBUTING.html">Contributing</a>
</li>
<li>
  <a href="http://archieml.org/">ArchieML.org</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/noamross/rchie">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="rchie-an-r-parser-for-archieml" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rchie-an-r-parser-for-archieml" class="anchor"></a>rchie: An R parser for ArchieML <img src="reference/figures/logo.png" align="right">
</h1></div>

<p><em>“Structured text, for an unstructured world.”</em></p>
<p>This package is a wrapper for <a href="https://github.com/newsdev/archieml-js">archieml-js</a>, a parser for the New York Times’ ArchieML markup format. ArchieML is designed for non-coders writing documents that need to include some structured data, especially writers producing structured text that will be rendered on website or interactive graphics. Learn more about ArchieML’s syntax and use cases at <a href="http://archieml.org/" class="uri">http://archieml.org/</a>, and see examples of its use <a href="https://awards.journalists.org/entries/archieml/">here</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install <strong>rchie</strong> from CRAN with:</p>
<pre><code><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages("rchie")</a></code></pre>
<p>Install the development version of <strong>rchie</strong> from GitHub using <strong>remotes</strong>, <strong>devtools</strong>, or my zero-dependency preference:</p>
<pre><code><a href="https://www.rdocumentation.org/packages/base/topics/source">source("https://install-github.me/noamross/rchie")</a></code></pre>
<p>Note that, because <strong>rchie</strong> uses the V8 package, it has a system requirement of <code>libv8</code>. See the <a href="https://github.com/jeroen/V8#v8">V8 README</a> for instructions.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>from_aml</code> can read ArchieML from a string, file, URL, or connection. It returns an R list:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(rchie)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">data1 &lt;-<span class="st"> "</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  [arrayName]</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">  </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">  Jeremy spoke with her on Friday, follow-up scheduled for next week</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="st">  name: Amanda</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="st">  age: 26</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  # Contact: 434-555-1234</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="st">  name: Tessa</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="st">  age: 30</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="st">  </span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="st">  []</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="st">  "</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw"><a href="reference/from_aml.html">from_aml</a></span>(data1)</a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; $arrayName</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; $arrayName[[1]]</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; $arrayName[[1]]$name</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; [1] "Amanda"</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; $arrayName[[1]]$age</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; [1] "26"</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; $arrayName[[2]]</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; $arrayName[[2]]$name</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; [1] "Tessa"</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; $arrayName[[2]]$age</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; [1] "30"</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; attr(,"class")</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; [1] "list"     "from_aml"</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="kw"><a href="reference/from_aml.html">from_aml</a></span>(<span class="st">"http://archieml.org/test/1.0/arrays.1.aml"</span>)</a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co">#&gt; $test</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="co">#&gt; [1] "[array] creates an empty array at array"</span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co">#&gt; $result</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co">#&gt; [1] "{\"array\": []}"</span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="co">#&gt; $array</span></a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt; list()</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt; attr(,"class")</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="co">#&gt; [1] "list"     "from_aml"</span></a></code></pre></div>
<p>If you want the raw JSON produced by the <code>archieml-js</code> parser, use <code><a href="reference/aml_to_json.html">aml_to_json()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="reference/aml_to_json.html">aml_to_json</a></span>(data1, <span class="dt">pretty =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;     "arrayName": [</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;         {</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;             "name": "Amanda",</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;             "age": "26"</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;         },</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;         {</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt;             "name": "Tessa",</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt;             "age": "30"</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt;         }</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt;     ]</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; </span></a></code></pre></div>
<div id="using-google-docs" class="section level3">
<h3 class="hasAnchor">
<a href="#using-google-docs" class="anchor"></a>Using Google Docs</h3>
<p>Since a common use-case for ArchieML is reading semi-structured text written in Google Docs, <strong>rchie</strong> includes optional methods to read items from Google Drive. To use them, you must have the <a href="https://googledrive.tidyverse.org/"><strong>googledrive</strong></a> package installed and pass a <code>drive_id</code> object to <code><a href="reference/from_aml.html">from_aml()</a></code>. Here we pull data from <a href="https://drive.google.com/open?id=1oYHXxvzscBBSBhd6xg5ckUEZo3tLytk9zY0VV_Y7SGs">this Google Doc</a>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(googledrive)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">gdata &lt;-<span class="st"> </span><span class="kw"><a href="reference/from_aml.html">from_aml</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/googledrive/topics/as_id">as_id</a></span>(<span class="st">"1pXCkhOsFtLUD8Gr6PIkWlEM1NYXXOW5V"</span>))</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(gdata)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; $key</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; [1] "value"</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; $`google-link`</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; [1] "This is a link."</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; $`google-link-standalone`</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; [1] "http://www.nytimes.com/2016/04/03/us/politics/donald-trump-general-election.html?q=1#1"</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; $`google-link-standalone-raw`</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; [1] "http://www.nytimes.com/2016/04/03/us/politics/donald-trump-general-election.html?q=1#1"</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; $`smart-quotes`</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; [1] "&lt;a href=“http://www.nytimes.com”&gt;nytimes.com&lt;/a&gt;"</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; $array</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt; $array[[1]]</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; [1] "1"</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; $array[[2]]</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; [1] "2"</span></a></code></pre></div>
<p>If you are using Google Docs to input ArchieML regularly, the <a href="https://chrome.google.com/webstore/detail/archieml/jelifjgbakgjapbobohocpbpdoiljokp">ArchieML Google Docs plugin</a> is quite helpful for previewing parsed data as you type.</p>
</div>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>I’d love you to contribute to <strong>rchie</strong>! I’d especially like some examples of use-cases - R Markdown documents, Shiny Apps, etc. - that I can feature in the documentation. Please take a look the the <a href="CONTRIBUTING.html">contributing guidelines</a>.</p>
<p>Note that <strong>rchie</strong> is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rchie">https://​cloud.r-project.org/​package=rchie</a>
</li>
<li>Browse source code at <br><a href="https://github.com/noamross/rchie">https://​github.com/​noamross/​rchie</a>
</li>
<li>Report a bug at <br><a href="https://github.com/noamross/rchie/issues">https://​github.com/​noamross/​rchie/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2.0)</small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Noam Ross <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2136-0000" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>Michael Strickland <br><small class="roles"> Author </small>  <br><small>(Author of archieml-js library)</small>
</li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://cran.r-project.org/package=rchie"><img src="http://www.r-pkg.org/badges/version/rchie" alt="CRAN version"></a></li>
<li><a href="https://travis-ci.org/noamross/rchie"><img src="https://travis-ci.org/noamross/rchie.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/NoamRoss/rchie/branch/master"><img src="https://ci.appveyor.com/api/projects/status/osig88jvixel2taa/branch/master?svg=true" alt="Build status"></a></li>
<li><a href="https://codecov.io/github/noamross/rchie?branch=master"><img src="https://codecov.io/github/noamross/rchie/coverage.svg?branch=master" alt="codecov.io"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Noam Ross, Michael Strickland.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'a9043dbe195aaa2303fb60a3fd8a7576',
    indexName: 'rchie',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
